#!/bin/bash
echo -e "[OS] add rcm ppa..."
if [[ `ls /etc/apt/sources.list.d` =~ "martin-frost" ]]; then
    echo -e "\t ! do nothing, already done"
else
    sudo add-apt-repository ppa:martin-frost/thoughtbot-rcm && sudo apt-get update
    echo -e "\t ~ DONE"
fi

echo -e "[OS] install deps by apt-get..."
if [ ! -f "/usr/bin/rcup" ]; then 
    sudo apt-get install rcm vim vim-nox-py2 git rcm zsh powerline python-powerline
    echo -e "\t ~ DONE"
else
    echo -e "\t ! do nothing, already done"
fi

echo -e "[zsh] update user defualt shell as zsh..."
if [[ $SHELL =~ "zsh" ]]; then 
    echo -e "\t ! do nothing, already done"
else
    chsh -s /bin/zsh
    echo -e "\t ~ DONE"
fi

echo -e "[git] update git global config..."
git config --global push.default simple
git config --global user.name "oopsfoo"
git config --global user.email "oopsfoo@gmail.com"
echo -e "\t ~ DONE"

echo -e "[zsh] install oh-my-zsh..."
if [ ! -d "$HOME/.oh-my-zsh/.git" ]; then 
    sh -c "$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"
    echo -e "\t ~ DONE"
else
    echo -e "\t ! do nothing, already done"
fi

echo -e "[vim] install vundle.vim..."
if [ ! -d "$HOME/.vim/bundle/Vundle.vim" ]; then 
    git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim
    echo -e "\t ~ DONE"
else
    echo -e "\t ! do nothing, already done"
fi

echo "[mkdir] make all custom directories..."
mkdir $MY_DBASE -p
mkdir $MY_SRC -p
mkdir $MY_REPO -p
mkdir $MY_PREPO -p -v
mkdir $MY_PROJ -p
mkdir $MY_GO -p
echo -e "\t ~ DONE"

echo -e "[dotfiles] disable local file push origins..."
cd ~/.dotfiles && git update-index --assume-unchanged *.local
echo -e "\t ~ DONE"

echo -e "[rcm] update all rc file..."
rm ~/.zshrc
rcup
echo -e "\t ~ DONE"
